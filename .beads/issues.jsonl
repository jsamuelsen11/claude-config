{"id":"claude-config-2lz","title":"Epic 3: Agent Curation","description":"## Produces\n- layers/20-agents/core/ (~15 agents: code-reviewer, debugger, refactoring-specialist, etc.)\n- layers/20-agents/{python,go,typescript,java}/ (language bundles)\n- layers/20-agents/{infra,specialty}/ (optional bundles)\n- Overlay-to-agent-bundle mapping (which overlay activates which bundles)\n\n## Defers\n- Custom agent authoring (uses existing voltagent agents as-is)\n- Skills, lifecycle scripts\n\n## Dependencies\n- Epic 1 (Foundation)","status":"closed","priority":2,"issue_type":"feature","owner":"jsamuelsen11@gmail.com","created_at":"2026-02-06T22:12:35.239465413-05:00","created_by":"jsamuelsen","updated_at":"2026-02-07T14:43:52.228973707-05:00","closed_at":"2026-02-07T14:43:52.228973707-05:00","close_reason":"Architectural pivot: all epics replaced by plugin-based architecture","dependencies":[{"issue_id":"claude-config-2lz","depends_on_id":"claude-config-9re","type":"blocks","created_at":"2026-02-06T22:17:57.521099307-05:00","created_by":"jsamuelsen"}]}
{"id":"claude-config-2lz.1","title":"3.1: Core agents (~15) — copy from voltagent to layers/20-agents/core/","description":"## What to build\nCopy the core agent set from ~/.claude/agents/ into layers/20-agents/core/.\n\n## Agents to include (15 agents)\nSource: ~/.claude/agents/\u003cname\u003e.md → layers/20-agents/core/\u003cname\u003e.md\n\n1. code-reviewer.md — Most-used capability (multi-file changes: 35 instances)\n2. debugger.md — Good debugging cited as key capability\n3. refactoring-specialist.md — Iterative refinement: top session type (23 sessions)\n4. fullstack-developer.md — End-to-end feature delivery\n5. backend-developer.md — Primary work is backend services\n6. api-designer.md — Service template work\n7. architect-reviewer.md — Architecture validation\n8. test-automator.md — 90%+ coverage enforcement\n9. build-engineer.md — CI/CD workflow development\n10. git-workflow-manager.md — Branch management (friction source)\n11. technical-writer.md — Documentation (12 sessions, 1638 markdown files)\n12. performance-engineer.md — Performance testing (k6, gotestsum)\n13. qa-expert.md — Quality gate enforcement\n14. prompt-engineer.md — CLAUDE.md and skills authoring\n15. error-detective.md — Test failure diagnosis\n\n## Process\n- Copy files as-is (do not modify agent content)\n- Verify each file has valid YAML frontmatter (name, description, tools)\n- Create layers/20-agents/core/README.md listing all core agents with one-line justifications\n\n## Acceptance\n- 15 .md files in layers/20-agents/core/\n- Each has valid YAML frontmatter\n- README.md documents the selection criteria\n\n## Defers\nCustom agent modifications, language/infra bundles","status":"closed","priority":2,"issue_type":"task","owner":"jsamuelsen11@gmail.com","created_at":"2026-02-06T23:26:22.38623874-05:00","created_by":"jsamuelsen","updated_at":"2026-02-07T14:37:41.79921788-05:00","closed_at":"2026-02-07T14:37:41.79921788-05:00","close_reason":"Architectural pivot: agents will live inside plugin directories","dependencies":[{"issue_id":"claude-config-2lz.1","depends_on_id":"claude-config-2lz","type":"parent-child","created_at":"2026-02-06T23:26:22.387990427-05:00","created_by":"jsamuelsen"}]}
{"id":"claude-config-2lz.2","title":"3.2: Language bundles (python, go, typescript, java)","description":"## What to build\nCopy language-specialist agents into categorized directories.\n\n## Bundles\n### layers/20-agents/python/ (3 agents)\n- python-pro.md\n- django-developer.md\n- data-scientist.md\n\n### layers/20-agents/go/ (1 agent)\n- golang-pro.md\n\n### layers/20-agents/typescript/ (4 agents)\n- typescript-pro.md\n- react-specialist.md\n- nextjs-developer.md\n- angular-architect.md\n\n### layers/20-agents/java/ (3 agents)\n- java-architect.md\n- spring-boot-engineer.md\n- kotlin-specialist.md\n\n## Process\n- Copy from ~/.claude/agents/ as-is\n- Each directory gets a README.md listing its agents\n- Total: 11 agents across 4 language dirs\n\n## Acceptance\n- All 11 .md files in correct directories\n- Each has valid YAML frontmatter\n- READMEs in each language dir\n\n## Defers\nCustom agent authoring","status":"closed","priority":2,"issue_type":"task","owner":"jsamuelsen11@gmail.com","created_at":"2026-02-06T23:26:22.426437994-05:00","created_by":"jsamuelsen","updated_at":"2026-02-07T14:37:41.807888097-05:00","closed_at":"2026-02-07T14:37:41.807888097-05:00","close_reason":"Architectural pivot: agents will live inside plugin directories","dependencies":[{"issue_id":"claude-config-2lz.2","depends_on_id":"claude-config-2lz","type":"parent-child","created_at":"2026-02-06T23:26:22.42861068-05:00","created_by":"jsamuelsen"},{"issue_id":"claude-config-2lz.2","depends_on_id":"claude-config-2lz.1","type":"blocks","created_at":"2026-02-06T23:26:26.07727722-05:00","created_by":"jsamuelsen"}]}
{"id":"claude-config-2lz.3","title":"3.3: Infra + specialty bundles","description":"## What to build\nCopy infrastructure and specialty agents.\n\n## Bundles\n### layers/20-agents/infra/ (6 agents)\n- devops-engineer.md\n- terraform-engineer.md\n- kubernetes-specialist.md\n- security-engineer.md\n- database-administrator.md\n- sre-engineer.md\n\n### layers/20-agents/specialty/ (selected based on user's work patterns)\n- data-engineer.md (for data pipeline work)\n- Others TBD based on need\n\n## Process\nSame as 3.1: copy from ~/.claude/agents/, verify frontmatter, add README.\n\n## Acceptance\n- All agents in correct directories with READMEs\n- Valid YAML frontmatter\n\n## Defers\nCustom agents, specialty bundle expansion","status":"closed","priority":2,"issue_type":"task","owner":"jsamuelsen11@gmail.com","created_at":"2026-02-06T23:26:22.468236845-05:00","created_by":"jsamuelsen","updated_at":"2026-02-07T14:37:41.815777186-05:00","closed_at":"2026-02-07T14:37:41.815777186-05:00","close_reason":"Architectural pivot: agents will live inside plugin directories","dependencies":[{"issue_id":"claude-config-2lz.3","depends_on_id":"claude-config-2lz","type":"parent-child","created_at":"2026-02-06T23:26:22.470020737-05:00","created_by":"jsamuelsen"},{"issue_id":"claude-config-2lz.3","depends_on_id":"claude-config-2lz.2","type":"blocks","created_at":"2026-02-06T23:26:26.121295103-05:00","created_by":"jsamuelsen"}]}
{"id":"claude-config-2lz.4","title":"3.4: Overlay → agent bundle mapping","description":"## What to build\nWire overlays to agent bundles so ccfg install knows which agents to symlink.\n\n## Changes needed\n1. Add \"agents\" key to each overlay JSON in overlays/:\n   - minimal.json: agents: [\"core\"]\n   - full-stack.json: agents: [\"core\", \"python\", \"go\", \"typescript\", \"java\", \"infra\", \"specialty\"]\n   - python.json: agents: [\"core\", \"python\"]\n   - go.json: agents: [\"core\", \"go\"]\n   - typescript.json: agents: [\"core\", \"typescript\"]\n   - java.json: agents: [\"core\", \"java\"]\n   - ci.json: agents: [\"core\"]\n\n2. Update src/ccfg/compose.py to:\n   - Extract \"agents\" arrays from overlays\n   - Resolve bundle names to directory paths (e.g., \"python\" → layers/20-agents/python/)\n   - Always include \"core\" bundle\n   - Union all requested bundles\n   - Output a manifest of agent .md files to install\n\n3. Add tests for agent resolution logic\n\n## Acceptance\n- compose.py resolves agent bundles from overlay selections\n- \"core\" is always included regardless of overlay\n- Stacking overlays unions their agent bundles\n- Tests cover: single overlay, multiple overlays, missing bundle (graceful error)\n\n## Defers\nActual symlink creation (Epic 5)","status":"closed","priority":2,"issue_type":"task","owner":"jsamuelsen11@gmail.com","created_at":"2026-02-06T23:26:22.51309113-05:00","created_by":"jsamuelsen","updated_at":"2026-02-07T14:37:41.824024537-05:00","closed_at":"2026-02-07T14:37:41.824024537-05:00","close_reason":"Architectural pivot: agents will live inside plugin directories","dependencies":[{"issue_id":"claude-config-2lz.4","depends_on_id":"claude-config-2lz","type":"parent-child","created_at":"2026-02-06T23:26:22.514896801-05:00","created_by":"jsamuelsen"},{"issue_id":"claude-config-2lz.4","depends_on_id":"claude-config-2lz.3","type":"blocks","created_at":"2026-02-06T23:26:26.16235736-05:00","created_by":"jsamuelsen"}]}
{"id":"claude-config-4mj","title":"Epic 6: Project Templates","description":"## Produces\n- bin/ccfg-init-project (scaffold from templates with variable substitution)\n- project-templates/base/ (universal CLAUDE.md.tmpl + settings.local.json)\n- project-templates/{python-service,go-service,typescript-app,monorepo}/\n- Template variable system: {{PROJECT_NAME}}, {{TEST_COMMAND}}, {{LINT_COMMAND}}, etc.\n\n## Defers\n- Evaluation harness (Epic 7)\n\n## Dependencies\n- Epic 5 (Lifecycle Scripts) — templates rely on compose/verify infrastructure","status":"closed","priority":2,"issue_type":"feature","owner":"jsamuelsen11@gmail.com","created_at":"2026-02-06T22:14:11.726393311-05:00","created_by":"jsamuelsen","updated_at":"2026-02-07T14:43:52.250424315-05:00","closed_at":"2026-02-07T14:43:52.250424315-05:00","close_reason":"Architectural pivot: all epics replaced by plugin-based architecture","dependencies":[{"issue_id":"claude-config-4mj","depends_on_id":"claude-config-gex","type":"blocks","created_at":"2026-02-06T22:17:57.696232357-05:00","created_by":"jsamuelsen"}]}
{"id":"claude-config-4mj.1","title":"6.1: ccfg init-project command + base template","description":"## Goal\nImplement the `ccfg init-project` subcommand and create the universal base project template.\n\n## What This Task Produces\n- **`src/ccfg/cli.py`**: Implement `init-project` subcommand with:\n  - `--template \u003ctype\u003e` flag (e.g. base, python-service, go-service)\n  - `--target \u003cpath\u003e` flag (target project directory)\n  - Template variable substitution engine (Jinja2 or simple string replace)\n  - Variables: {{PROJECT_NAME}} (dir basename), {{TEST_COMMAND}}, {{LINT_COMMAND}}, {{PACKAGE_MANAGER}} (detected or user input)\n  - Interactive prompts for variables that can't be auto-detected\n  - Creates `\u003ctarget\u003e/CLAUDE.md` from `.tmpl` file\n  - Creates `\u003ctarget\u003e/.claude/settings.local.json` from template\n- **`project-templates/base/CLAUDE.md.tmpl`**: Universal baseline template with:\n  - Project name and description placeholders\n  - Test/lint command references\n  - Package manager usage rules\n  - Link back to global CLAUDE.md for inherited rules\n- **`project-templates/base/.claude/settings.local.json`**: Minimal permissions baseline\n- **Tests**: Pytest tests for template variable substitution and file generation\n\n## Design Decisions\n- D1: Python CLI via uv + Typer\n- Template variables use `{{VAR}}` syntax (simple string replace unless Jinja2 warranted)\n- Templates produce files that work standalone without ccfg installed (portable)\n- settings.local.json uses least-privilege: no global allow entries, projects opt-in\n\n## Context\n- See docs/DESIGN.md for full architecture (Section 4: Project-Level Configuration)\n- See plan file Section 4 for template variables and example permissions\n- Depends on Epic 5 completion (CLI framework must be working)\n- Epic 5 task 5.1-5.6 implement the CLI; this task adds the init-project command","status":"closed","priority":1,"issue_type":"task","owner":"jsamuelsen11@gmail.com","created_at":"2026-02-06T23:31:00.936647362-05:00","created_by":"jsamuelsen","updated_at":"2026-02-07T14:43:36.859227677-05:00","closed_at":"2026-02-07T14:43:36.859227677-05:00","close_reason":"Architectural pivot: will be rethought as plugin commands","dependencies":[{"issue_id":"claude-config-4mj.1","depends_on_id":"claude-config-4mj","type":"parent-child","created_at":"2026-02-06T23:31:00.937629012-05:00","created_by":"jsamuelsen"}]}
{"id":"claude-config-4mj.2","title":"6.2: Python + Go project templates","description":"## Goal\nCreate language-specific project templates for Python services and Go services.\n\n## What This Task Produces\n- **`project-templates/python-service/CLAUDE.md.tmpl`**: Python-specific rules including:\n  - Use `uv` for all Python operations (never bare python/pip/pytest)\n  - All test files must have `pytestmark` decorators\n  - Use specific `match` parameters on `pytest.raises` calls\n  - Ruff for linting, mypy for type checking\n  - Lefthook for pre-commit hooks\n  - {{PROJECT_NAME}}, {{TEST_COMMAND}} (default: `uv run pytest`), {{LINT_COMMAND}} (default: `uv run ruff check`)\n- **`project-templates/python-service/.claude/settings.local.json`**: Python permissions:\n  ```json\n  {\"permissions\": {\"allow\": [\"Bash(uv run:*)\", \"Bash(uv sync:*)\", \"Bash(make:*)\", \"Bash(lefthook run:*)\", \"Bash(git:*)\"]}}\n  ```\n- **`project-templates/go-service/CLAUDE.md.tmpl`**: Go-specific rules including:\n  - Use `task` (Taskfile) for build/test/lint where available\n  - Use `gofumpt` for formatting, `golangci-lint` for linting\n  - Never ignore error returns, never use nolint directives\n  - {{PROJECT_NAME}}, {{TEST_COMMAND}} (default: `task test`), {{LINT_COMMAND}} (default: `task lint`)\n- **`project-templates/go-service/.claude/settings.local.json`**: Go permissions:\n  ```json\n  {\"permissions\": {\"allow\": [\"Bash(go:*)\", \"Bash(task:*)\", \"Bash(golangci-lint:*)\", \"Bash(gofumpt:*)\", \"Bash(git:*)\"]}}\n  ```\n\n## Context\n- See docs/DESIGN.md Section 4 for template design\n- Rules derived from Insights Report friction analysis (42 wrong approaches, 34 buggy code)\n- Python rules: uv enforcement, pytestmark, pytest.raises match\n- Go rules: task usage, golangci-lint, error handling, no nolint\n- Depends on task 6.1 (template engine and base template must exist)","status":"closed","priority":2,"issue_type":"task","owner":"jsamuelsen11@gmail.com","created_at":"2026-02-06T23:35:31.491314967-05:00","created_by":"jsamuelsen","updated_at":"2026-02-07T14:43:36.866480327-05:00","closed_at":"2026-02-07T14:43:36.866480327-05:00","close_reason":"Architectural pivot: will be rethought as plugin commands","dependencies":[{"issue_id":"claude-config-4mj.2","depends_on_id":"claude-config-4mj","type":"parent-child","created_at":"2026-02-06T23:35:31.492498297-05:00","created_by":"jsamuelsen"},{"issue_id":"claude-config-4mj.2","depends_on_id":"claude-config-4mj.1","type":"blocks","created_at":"2026-02-06T23:35:36.123362155-05:00","created_by":"jsamuelsen"}]}
{"id":"claude-config-4mj.3","title":"6.3: TypeScript + monorepo project templates","description":"## Goal\nCreate TypeScript app and monorepo project templates.\n\n## What This Task Produces\n- **`project-templates/typescript-app/CLAUDE.md.tmpl`**: TypeScript-specific rules including:\n  - npm/npx for package management\n  - ESLint for linting, Vitest or Jest for testing\n  - Strict TypeScript settings encouraged\n  - {{PROJECT_NAME}}, {{TEST_COMMAND}} (default: `npm test`), {{LINT_COMMAND}} (default: `npx eslint .`)\n- **`project-templates/typescript-app/.claude/settings.local.json`**: TS permissions:\n  ```json\n  {\"permissions\": {\"allow\": [\"Bash(npm:*)\", \"Bash(npx:*)\", \"Bash(tsx:*)\", \"Bash(git:*)\"]}}\n  ```\n- **`project-templates/monorepo/CLAUDE.md.tmpl`**: Multi-language monorepo template:\n  - Per-service CLAUDE.md references\n  - Root-level build/test orchestration commands\n  - Directory structure conventions\n  - How to handle cross-service dependencies\n- **`project-templates/monorepo/.claude/settings.local.json`**: Broad permissions for multi-language work\n\n## Context\n- See docs/DESIGN.md Section 4 for template design\n- TypeScript: 414 files in Insights Report, secondary language\n- Monorepo template is more generic, serves as a composition guide\n- Depends on task 6.2 (builds on established template patterns)","status":"closed","priority":2,"issue_type":"task","owner":"jsamuelsen11@gmail.com","created_at":"2026-02-06T23:35:33.099381554-05:00","created_by":"jsamuelsen","updated_at":"2026-02-07T14:43:36.876648719-05:00","closed_at":"2026-02-07T14:43:36.876648719-05:00","close_reason":"Architectural pivot: will be rethought as plugin commands","dependencies":[{"issue_id":"claude-config-4mj.3","depends_on_id":"claude-config-4mj","type":"parent-child","created_at":"2026-02-06T23:35:33.100306418-05:00","created_by":"jsamuelsen"},{"issue_id":"claude-config-4mj.3","depends_on_id":"claude-config-4mj.2","type":"blocks","created_at":"2026-02-06T23:35:36.743496789-05:00","created_by":"jsamuelsen"}]}
{"id":"claude-config-9re","title":"Epic 1: Foundation \u0026 Scaffolding","description":"## Produces\n- Repository directory structure (bin/, lib/, layers/, overlays/, skills/, project-templates/, eval/, docs/, secrets/)\n- .gitignore (excludes machine overlays, secrets, generated output)\n- lib/ shell libraries: log.sh, detect.sh, compose.sh (jq-based JSON merge), symlink.sh, backup.sh\n- README.md (architecture overview, quickstart)\n\n## Defers\n- All configuration content (CLAUDE.md, settings layers, overlays)\n- Agent curation, skills, lifecycle scripts\n\n## Dependencies\n- None (root epic)\n\n## Context\nFresh repo (beads init only). Target: Linux + macOS. External deps: bash \u003e=4, jq \u003e=1.6, git \u003e=2.30. compose.sh is the critical path — it implements deep merge for enabledPlugins (union), hooks (concatenation), scalars (last-writer-wins).","status":"closed","priority":1,"issue_type":"feature","owner":"jsamuelsen11@gmail.com","created_at":"2026-02-06T21:24:39.760761827-05:00","created_by":"jsamuelsen","updated_at":"2026-02-07T14:43:52.211885492-05:00","closed_at":"2026-02-07T14:43:52.211885492-05:00","close_reason":"Architectural pivot: all epics replaced by plugin-based architecture"}
{"id":"claude-config-9re.1","title":"1.1: Directory structure, .gitignore, docs/DESIGN.md","description":"## What to build\nCreate the full repository directory tree, .gitignore, and docs/DESIGN.md.\n\n## Directory tree\nAll directories per the layout in the plan file (see Section 1). Key paths:\n- bin/, src/ccfg/, tests/\n- layers/{00-base,10-plugins,20-agents/{core,python,go,typescript,java,infra,specialty},30-hooks,40-machine}\n- overlays/, project-templates/{base,python-service,go-service,typescript-app,monorepo}\n- skills/{global/{epic-execute,epic-plan,pr-create,coverage-push},python,go}\n- secrets/, eval/scenarios/, docs/\n\nEach major directory gets a short README.md explaining what belongs there. Empty leaf dirs get .gitkeep.\n\n## .gitignore rules\n- layers/40-machine/*.json and *.claude.md (but NOT _template* or README.md)\n- secrets/* (but NOT .gitkeep or README.md)\n- out/ (generated output)\n- .beads runtime files (*.db, *.db-shm, *.db-wal, bd.sock, daemon.*)\n- Standard Python ignores (__pycache__, *.pyc, .venv, dist/, *.egg-info)\n\n## docs/DESIGN.md\nWrite the canonical design decisions document containing:\n- All 13 locked-in decisions (D1-D13) with rationale\n- Merge rule specifications (plugin union, hook concat, scalar LWW)\n- CLAUDE.md composition rules (concatenation with --- separators)\n- Agent resolution rules (overlay → bundle mapping)\n- settings.json copy-not-symlink rationale\n- Target platforms and external dependencies\n\nThis is THE reference document for all future sessions. Any Claude session should read this first.\n\n## Acceptance\n- `find . -type d` matches expected tree\n- git status shows no ignored files that should be tracked\n- docs/DESIGN.md contains all D1-D13 decisions\n- READMEs exist in bin/, src/, tests/, layers/, overlays/, skills/, secrets/, eval/, docs/\n\n## Defers\nAll config/code content. This task creates structure only.","status":"closed","priority":1,"issue_type":"task","owner":"jsamuelsen11@gmail.com","created_at":"2026-02-06T23:01:55.729168778-05:00","created_by":"jsamuelsen","updated_at":"2026-02-07T14:36:23.672420921-05:00","closed_at":"2026-02-07T14:36:23.672420921-05:00","close_reason":"Architectural pivot: CLI-based approach replaced by native Claude Code plugin marketplace","dependencies":[{"issue_id":"claude-config-9re.1","depends_on_id":"claude-config-9re","type":"parent-child","created_at":"2026-02-06T23:01:55.730897069-05:00","created_by":"jsamuelsen"}]}
{"id":"claude-config-9re.2","title":"1.2: Python project setup (pyproject.toml, uv, package skeleton)","description":"## What to build\nInitialize the Python project with uv and create the package skeleton.\n\n## Files to create\n- pyproject.toml: project name=ccfg, python\u003e=3.11, dependencies=[typer[all]], dev-dependencies=[pytest, ruff, mypy]. Entry point: ccfg = \"ccfg.cli:app\"\n- src/ccfg/__init__.py: version string only\n- src/ccfg/cli.py: empty Typer app placeholder (just `app = typer.Typer()`)\n- src/ccfg/compose.py: empty module\n- src/ccfg/detect.py: empty module\n- src/ccfg/symlink.py: empty module\n- src/ccfg/backup.py: empty module\n- tests/__init__.py: empty\n- tests/conftest.py: shared fixtures (tmp_path-based temp dirs)\n- bin/ccfg: shell wrapper script:\n  ```bash\n  #!/usr/bin/env bash\n  exec uv run ccfg \"$@\"\n  ```\n\n## Acceptance\n- `uv sync` succeeds\n- `uv run python -c \"import ccfg\"` succeeds\n- `uv run pytest` runs (0 tests collected is fine)\n- `uv run ruff check src/ tests/` passes\n- bin/ccfg is executable\n\n## Design references\n- D1: Python CLI via uv + Typer\n- D2: bin/ccfg is a thin shell wrapper\n\n## Defers\nCLI commands, library implementations","status":"closed","priority":1,"issue_type":"task","owner":"jsamuelsen11@gmail.com","created_at":"2026-02-06T23:01:55.769831378-05:00","created_by":"jsamuelsen","updated_at":"2026-02-07T14:36:23.68447577-05:00","closed_at":"2026-02-07T14:36:23.68447577-05:00","close_reason":"Architectural pivot: CLI-based approach replaced by native Claude Code plugin marketplace","dependencies":[{"issue_id":"claude-config-9re.2","depends_on_id":"claude-config-9re","type":"parent-child","created_at":"2026-02-06T23:01:55.770793546-05:00","created_by":"jsamuelsen"},{"issue_id":"claude-config-9re.2","depends_on_id":"claude-config-9re.1","type":"blocks","created_at":"2026-02-06T23:04:57.872861364-05:00","created_by":"jsamuelsen"}]}
{"id":"claude-config-9re.3","title":"1.3: CLI skeleton (Typer app with stubbed subcommands)","description":"## What to build\nImplement the Typer CLI app with all subcommands stubbed out.\n\n## Subcommands to create (all print \"Not yet implemented\" and exit)\n- ccfg install [--overlays LIST] [--machine NAME]\n- ccfg uninstall [--restore-backup]\n- ccfg update [--overlays LIST]\n- ccfg verify [--verbose]\n- ccfg compose [--overlays LIST] [--machine NAME] [--output FILE]\n- ccfg doctor\n- ccfg diff\n- ccfg init-machine [--name NAME]\n- ccfg init-project --template NAME --target PATH\n\n## Implementation\n- src/ccfg/cli.py: Typer app with subcommands\n- Each subcommand is a function with proper type hints and docstrings\n- Use typer.echo() for output, typer.Exit(code=1) for not-implemented\n\n## Acceptance\n- `uv run ccfg --help` shows all subcommands with descriptions\n- `uv run ccfg install --help` shows options\n- `uv run ccfg compose` prints \"Not yet implemented\" and exits 1\n- All subcommands respond to --help\n\n## Defers\nAll command implementations (Epics 2-6)","status":"closed","priority":1,"issue_type":"task","owner":"jsamuelsen11@gmail.com","created_at":"2026-02-06T23:02:36.916219368-05:00","created_by":"jsamuelsen","updated_at":"2026-02-07T14:36:23.69766486-05:00","closed_at":"2026-02-07T14:36:23.69766486-05:00","close_reason":"Architectural pivot: CLI-based approach replaced by native Claude Code plugin marketplace","dependencies":[{"issue_id":"claude-config-9re.3","depends_on_id":"claude-config-9re","type":"parent-child","created_at":"2026-02-06T23:02:36.917515739-05:00","created_by":"jsamuelsen"},{"issue_id":"claude-config-9re.3","depends_on_id":"claude-config-9re.2","type":"blocks","created_at":"2026-02-06T23:04:57.910069585-05:00","created_by":"jsamuelsen"}]}
{"id":"claude-config-9re.4","title":"1.4: compose.py — layer merge engine with pytest fixtures","description":"## What to build\nThe JSON merge engine that combines configuration layers into a final settings.json. This is the critical-path component — everything depends on it.\n\n## Three merge strategies to implement\n\n### Strategy A: enabledPlugins (union with false-removal)\n- Collect enabledPlugins from all layers\n- Union all key-value pairs\n- If any layer sets a plugin to false, remove it from the final output\n- Example: base={beads:true}, overlay={jdtls:true}, machine={jdtls:false} → {beads:true}\n\n### Strategy B: hooks (deep merge with array concatenation)\n- Merge by hook event name (SessionStart, PreCompact, PostToolUse, etc.)\n- Within each event, concatenate hook arrays from all layers\n- Deduplicate by command string\n- Example: base has SessionStart=[bd prime], overlay adds SessionStart=[lint check] → SessionStart=[bd prime, lint check]\n\n### Strategy C: scalars (last-writer-wins)\n- For all other keys (alwaysThinkingEnabled, etc.), last layer value wins\n- Exception: feedbackSurveyState is ONLY taken from base layer, never overridden\n\n## Public API\n```python\ndef compose_settings(\n    base: Path,\n    plugin_layers: list[Path],\n    hook_layers: list[Path],\n    overlays: list[Path],\n    machine: Path | None = None,\n) -\u003e dict:\n    \"\"\"Merge all layers into final settings.json content.\"\"\"\n```\n\n## Test fixtures needed (tests/test_compose.py)\n1. Basic merge: base + one overlay → correct output\n2. Plugin union: multiple layers contribute plugins\n3. Plugin false-removal: higher layer disables plugin\n4. Hook concatenation: hooks from multiple layers stack\n5. Hook deduplication: duplicate commands removed\n6. Scalar last-writer-wins: overlay overrides base scalar\n7. feedbackSurveyState preservation: never overridden\n8. Empty layer handling: missing or empty files don't crash\n9. Invalid JSON handling: graceful error\n10. Full pipeline: base + plugins + hooks + overlay + machine → expected output\n\n## Acceptance\n- All 10+ test cases pass\n- `uv run pytest tests/test_compose.py -v` shows green\n- `uv run ruff check src/ccfg/compose.py` passes\n\n## Design references\n- D3: Merge engine tested with pytest from day 1\n- D4: settings.json is copied, not symlinked\n- Section 2 of plan: Merge Mechanics table\n\n## Defers\nActual layer files (Epic 2). Tests use inline fixtures or temp files.","status":"closed","priority":1,"issue_type":"task","owner":"jsamuelsen11@gmail.com","created_at":"2026-02-06T23:02:36.954217594-05:00","created_by":"jsamuelsen","updated_at":"2026-02-07T14:36:23.707825761-05:00","closed_at":"2026-02-07T14:36:23.707825761-05:00","close_reason":"Architectural pivot: CLI-based approach replaced by native Claude Code plugin marketplace","dependencies":[{"issue_id":"claude-config-9re.4","depends_on_id":"claude-config-9re","type":"parent-child","created_at":"2026-02-06T23:02:36.955194914-05:00","created_by":"jsamuelsen"},{"issue_id":"claude-config-9re.4","depends_on_id":"claude-config-9re.3","type":"blocks","created_at":"2026-02-06T23:04:57.946511926-05:00","created_by":"jsamuelsen"}]}
{"id":"claude-config-9re.5","title":"1.5: detect.py — platform and runtime detection","description":"## What to build\nPlatform and runtime detection module. Used by ccfg init-machine to auto-generate machine overlays.\n\n## Functions to implement\n- detect_platform() -\u003e dict: returns {os: linux|darwin, arch: x86_64|arm64, hostname: str}\n  - Normalize aarch64 → arm64 for consistency\n  - Respect CCFG_MACHINE env var as hostname override\n- detect_runtimes() -\u003e dict[str, bool]: probes for 8 runtimes\n  - node, go, python3, rustc, java, dotnet, ruby, php\n  - Each checks `shutil.which(binary)` existence\n- detect_all() -\u003e dict: combined platform + runtimes\n\n## Cross-platform notes\n- macOS: uname -m returns arm64 (Apple Silicon) or x86_64\n- Linux: uname -m returns aarch64 or x86_64\n- hostname: use socket.gethostname() or platform.node(), NOT subprocess\n\n## Acceptance\n- detect_platform() returns correct values on current machine\n- detect_runtimes() correctly identifies available runtimes\n- CCFG_MACHINE=test-box overrides hostname\n- No subprocess calls for platform detection (use stdlib only)\n- Runtime probes use shutil.which (no subprocess)\n\n## Design references\n- D7: Machine overlays identified by hostname\n- D9: Target platforms Linux + macOS\n\n## Defers\nCLI integration (Epic 5). This is a library module only.","status":"closed","priority":2,"issue_type":"task","owner":"jsamuelsen11@gmail.com","created_at":"2026-02-06T23:04:52.943975532-05:00","created_by":"jsamuelsen","updated_at":"2026-02-07T14:36:23.719496253-05:00","closed_at":"2026-02-07T14:36:23.719496253-05:00","close_reason":"Architectural pivot: CLI-based approach replaced by native Claude Code plugin marketplace","dependencies":[{"issue_id":"claude-config-9re.5","depends_on_id":"claude-config-9re","type":"parent-child","created_at":"2026-02-06T23:04:52.944965299-05:00","created_by":"jsamuelsen"},{"issue_id":"claude-config-9re.5","depends_on_id":"claude-config-9re.2","type":"blocks","created_at":"2026-02-06T23:04:57.981694426-05:00","created_by":"jsamuelsen"}]}
{"id":"claude-config-9re.6","title":"1.6: symlink.py + backup.py — file management utilities","description":"## What to build\nTwo utility modules for managed symlink operations and backup/restore.\n\n## symlink.py\n- create_symlink(source: Path, target: Path, force: bool = False) -\u003e bool\n  - Creates symlink target → source\n  - If target exists and is not a symlink, refuse unless force=True\n  - If target is already a correct symlink, no-op (idempotent)\n- verify_symlink(target: Path, expected_source: Path) -\u003e bool\n  - Returns True if target is a symlink pointing to expected_source\n- remove_managed_symlinks(targets: list[Path]) -\u003e list[Path]\n  - Remove only symlinks whose targets point into the ccfg repo\n  - Returns list of removed paths\n- list_managed_symlinks(directory: Path, repo_root: Path) -\u003e list[Path]\n  - Find all symlinks in directory that point into repo_root\n\n## backup.py\n- create_backup(claude_dir: Path) -\u003e Path\n  - Backs up settings.json, CLAUDE.md, and agents/ to ~/.claude/.ccfg-backup/\u003ctimestamp\u003e/\n  - Returns backup directory path\n  - Only backs up files that exist\n- restore_backup(backup_dir: Path, claude_dir: Path) -\u003e None\n  - Restores from a backup directory\n  - Removes ccfg-managed symlinks first\n- list_backups(claude_dir: Path) -\u003e list[Path]\n  - Lists all backup directories, newest first\n\n## Acceptance\n- Symlink operations are idempotent (running twice produces same result)\n- Backup creates timestamped directory\n- Restore works after backup\n- Managed symlink detection correctly identifies ccfg-owned vs external symlinks\n- All operations handle missing files/directories gracefully\n\n## Defers\nLifecycle orchestration (Epic 5). These are library modules.","status":"closed","priority":2,"issue_type":"task","owner":"jsamuelsen11@gmail.com","created_at":"2026-02-06T23:04:52.980433187-05:00","created_by":"jsamuelsen","updated_at":"2026-02-07T14:36:23.735090295-05:00","closed_at":"2026-02-07T14:36:23.735090295-05:00","close_reason":"Architectural pivot: CLI-based approach replaced by native Claude Code plugin marketplace","dependencies":[{"issue_id":"claude-config-9re.6","depends_on_id":"claude-config-9re","type":"parent-child","created_at":"2026-02-06T23:04:52.981367085-05:00","created_by":"jsamuelsen"},{"issue_id":"claude-config-9re.6","depends_on_id":"claude-config-9re.2","type":"blocks","created_at":"2026-02-06T23:04:58.017293557-05:00","created_by":"jsamuelsen"}]}
{"id":"claude-config-9re.7","title":"1.7: README.md — architecture overview and quickstart","description":"## What to build\nTop-level README.md for the claude-config repository.\n\n## Content\n- One-paragraph description: what this repo is and why it exists\n- Prerequisites: Python 3.11+, uv, git, Claude Code CLI\n- Quickstart: clone → uv sync → uv run ccfg install --overlays python\n- Directory layout summary (brief, links to docs/DESIGN.md for details)\n- Link to docs/ for detailed guides\n- License (if applicable)\n\n## Acceptance\n- README exists at repo root\n- Quickstart commands are accurate (or noted as \"coming in Epic 5\")\n- Links to docs/DESIGN.md\n\n## Defers\nDetailed documentation (Epic 7)","status":"closed","priority":3,"issue_type":"task","owner":"jsamuelsen11@gmail.com","created_at":"2026-02-06T23:04:53.018104788-05:00","created_by":"jsamuelsen","updated_at":"2026-02-07T14:36:23.740956985-05:00","closed_at":"2026-02-07T14:36:23.740956985-05:00","close_reason":"Architectural pivot: CLI-based approach replaced by native Claude Code plugin marketplace","dependencies":[{"issue_id":"claude-config-9re.7","depends_on_id":"claude-config-9re","type":"parent-child","created_at":"2026-02-06T23:04:53.019333361-05:00","created_by":"jsamuelsen"},{"issue_id":"claude-config-9re.7","depends_on_id":"claude-config-9re.4","type":"blocks","created_at":"2026-02-06T23:04:58.053265948-05:00","created_by":"jsamuelsen"}]}
{"id":"claude-config-adp","title":"Epic 7: Evaluation \u0026 Documentation","description":"## Produces\n- eval/scenarios/: plan-epic, refactor-function, review-pr, debug-test-failure\n- eval/criteria.md (pass/fail rubric per scenario)\n- eval/run-eval.sh (lightweight manual validation)\n- docs/: architecture, install-guide, layering, adding-agents, adding-skills, troubleshooting\n\n## Defers\n- Nothing (final epic)\n\n## Dependencies\n- Epic 5 (Lifecycle Scripts), Epic 6 (Project Templates)","status":"closed","priority":2,"issue_type":"feature","owner":"jsamuelsen11@gmail.com","created_at":"2026-02-06T22:14:11.760829934-05:00","created_by":"jsamuelsen","updated_at":"2026-02-07T14:43:52.258127638-05:00","closed_at":"2026-02-07T14:43:52.258127638-05:00","close_reason":"Architectural pivot: all epics replaced by plugin-based architecture","dependencies":[{"issue_id":"claude-config-adp","depends_on_id":"claude-config-gex","type":"blocks","created_at":"2026-02-06T22:17:57.733032773-05:00","created_by":"jsamuelsen"},{"issue_id":"claude-config-adp","depends_on_id":"claude-config-4mj","type":"blocks","created_at":"2026-02-06T22:17:57.773115502-05:00","created_by":"jsamuelsen"}]}
{"id":"claude-config-adp.1","title":"7.1: Eval scenarios + pass/fail criteria","description":"## Goal\nCreate evaluation scenarios that validate the ccfg configuration actually improves Claude Code behavior.\n\n## What This Task Produces\n- **`eval/scenarios/plan-epic.md`**: Scenario testing \"Can Claude produce a beads epic from a feature description?\"\n  - Setup: temp project with ccfg installed, beads initialized\n  - Prompt: \"Plan an epic for adding user authentication to this service\"\n  - Expected: Claude follows CLAUDE.md rules (branch policy, one-task-at-a-time, beads --parent)\n- **`eval/scenarios/refactor-function.md`**: Scenario testing \"Can Claude refactor code while passing lint and tests?\"\n  - Setup: sample function with known code smells\n  - Prompt: \"Refactor this function to improve readability\"\n  - Expected: no nolint, no magic numbers, runs lint before declaring done\n- **`eval/scenarios/review-pr.md`**: Scenario testing \"Can Claude produce meaningful PR review feedback?\"\n  - Setup: PR with known issues (security, performance, style)\n  - Prompt: \"Review this PR\"\n  - Expected: identifies real issues, uses correct tools (uv not python)\n- **`eval/scenarios/debug-test-failure.md`**: Scenario testing \"Can Claude diagnose and fix a failing test?\"\n  - Setup: project with intentionally failing test\n  - Prompt: \"Fix the failing test\"\n  - Expected: diagnoses root cause, fixes without disabling test, runs full suite\n- **`eval/criteria.md`**: Pass/fail rubric for all scenarios:\n  - Did Claude follow CLAUDE.md rules?\n  - Did Claude use correct tools? (uv not python, task not go directly)\n  - Was output production-grade? (no nolint, no magic numbers)\n  - Did Claude stay focused? (no excessive exploration, no scope creep)\n\n## Context\n- Scenarios derived from Insights Report friction patterns\n- Each scenario tests specific CLAUDE.md rules\n- Lightweight: manual validation, not automated CI\n- See plan Section 12 for scenario details","status":"closed","priority":2,"issue_type":"task","owner":"jsamuelsen11@gmail.com","created_at":"2026-02-06T23:35:51.243040317-05:00","created_by":"jsamuelsen","updated_at":"2026-02-07T14:43:41.207464087-05:00","closed_at":"2026-02-07T14:43:41.207464087-05:00","close_reason":"Architectural pivot: will be rescoped for plugin architecture","dependencies":[{"issue_id":"claude-config-adp.1","depends_on_id":"claude-config-adp","type":"parent-child","created_at":"2026-02-06T23:35:51.244198071-05:00","created_by":"jsamuelsen"}]}
{"id":"claude-config-adp.2","title":"7.2: Eval runner script","description":"## Goal\nCreate a lightweight evaluation runner that executes scenarios and reports results.\n\n## What This Task Produces\n- **`eval/run-eval.sh`** (or Python equivalent): Script that:\n  - Creates a temporary project directory\n  - Runs `ccfg install` with a test overlay\n  - Runs `ccfg init-project --template base --target \u003ctemp\u003e`\n  - Executes each scenario via Claude Code --print mode (non-interactive)\n  - Captures output for manual review\n  - Reports summary: which scenarios were attempted, basic pass/fail indicators\n- **`eval/README.md`**: Instructions for running evaluations manually\n\n## Design Decisions\n- Lightweight: not automated CI, but a manual validation step after config changes\n- Uses Claude Code --print mode for non-interactive execution\n- Results are for human review, not automated scoring\n- Can be run selectively (single scenario or all)\n\n## Context\n- Depends on task 7.1 (scenarios must exist)\n- Depends on Epic 5 completion (ccfg install must work)\n- See plan Section 12 for evaluation design","status":"closed","priority":2,"issue_type":"task","owner":"jsamuelsen11@gmail.com","created_at":"2026-02-06T23:35:57.441056981-05:00","created_by":"jsamuelsen","updated_at":"2026-02-07T14:43:41.215452924-05:00","closed_at":"2026-02-07T14:43:41.215452924-05:00","close_reason":"Architectural pivot: will be rescoped for plugin architecture","dependencies":[{"issue_id":"claude-config-adp.2","depends_on_id":"claude-config-adp","type":"parent-child","created_at":"2026-02-06T23:35:57.442289511-05:00","created_by":"jsamuelsen"},{"issue_id":"claude-config-adp.2","depends_on_id":"claude-config-adp.1","type":"blocks","created_at":"2026-02-06T23:36:17.385693443-05:00","created_by":"jsamuelsen"}]}
{"id":"claude-config-adp.3","title":"7.3: Core documentation (architecture, install guide, layering)","description":"## Goal\nWrite the core reference documentation for the ccfg system.\n\n## What This Task Produces\n- **`docs/architecture.md`**: Full architecture reference covering:\n  - System overview and design philosophy\n  - Directory layout with explanations\n  - Configuration layering model (5 layers, merge rules)\n  - Agent tiering system\n  - Skills and plugin management\n  - MCP server integration\n  - Machine overlay system\n- **`docs/install-guide.md`**: Step-by-step installation guide:\n  - Prerequisites (Python 3.11+, uv, git, Claude Code)\n  - Clone repo, run ccfg install\n  - Machine overlay setup (init-machine)\n  - Overlay selection guide\n  - Verification steps\n  - Troubleshooting common install issues\n- **`docs/layering.md`**: Detailed composition rules with examples:\n  - Layer precedence (00-base → 10-plugins → 30-hooks → overlays → 40-machine)\n  - Merge strategy per key type (union, deep merge, LWW)\n  - Concrete before/after examples for each merge strategy\n  - CLAUDE.md concatenation rules\n  - Agent resolution from overlays\n\n## Context\n- docs/DESIGN.md (created in Epic 1 task 1.1) is the canonical design reference\n- These docs expand on DESIGN.md for end-user consumption\n- Depends on all implementation epics being complete (documents the built system)","status":"closed","priority":2,"issue_type":"task","owner":"jsamuelsen11@gmail.com","created_at":"2026-02-06T23:36:06.196251531-05:00","created_by":"jsamuelsen","updated_at":"2026-02-07T14:43:41.227053391-05:00","closed_at":"2026-02-07T14:43:41.227053391-05:00","close_reason":"Architectural pivot: will be rescoped for plugin architecture","dependencies":[{"issue_id":"claude-config-adp.3","depends_on_id":"claude-config-adp","type":"parent-child","created_at":"2026-02-06T23:36:06.197762493-05:00","created_by":"jsamuelsen"},{"issue_id":"claude-config-adp.3","depends_on_id":"claude-config-adp.2","type":"blocks","created_at":"2026-02-06T23:36:18.044917151-05:00","created_by":"jsamuelsen"}]}
{"id":"claude-config-adp.4","title":"7.4: Extension docs (adding agents, skills, troubleshooting)","description":"## Goal\nWrite documentation for extending and troubleshooting the ccfg system.\n\n## What This Task Produces\n- **`docs/adding-agents.md`**: How to curate and add agents:\n  - Agent .md file format (YAML frontmatter + instructions)\n  - Where to place agents (core vs bundle categories)\n  - How to reference agents in overlay JSON\n  - Testing agent availability after install\n  - Tips for writing effective agent instructions\n- **`docs/adding-skills.md`**: How to write custom skills:\n  - Skill format (markdown with YAML frontmatter)\n  - allowed-tools syntax and security considerations\n  - Argument handling ($ARGUMENTS)\n  - Skill placement (global vs language-specific)\n  - Examples from existing skills\n- **`docs/troubleshooting.md`**: Common issues and fixes:\n  - ccfg verify failures and what they mean\n  - Dangling symlinks after git pull\n  - settings.json drift detection and resolution\n  - Plugin enablement vs installation mismatches\n  - Machine overlay conflicts\n  - LSP plugin runtime not found\n  - How to reset to clean state (ccfg uninstall + reinstall)\n\n## Context\n- Final documentation task — all other docs and implementation must be complete\n- Depends on task 7.3 (core docs establish the reference framework)\n- Should be practical and example-driven, not theoretical","status":"closed","priority":3,"issue_type":"task","owner":"jsamuelsen11@gmail.com","created_at":"2026-02-06T23:36:14.593375675-05:00","created_by":"jsamuelsen","updated_at":"2026-02-07T14:43:41.234613212-05:00","closed_at":"2026-02-07T14:43:41.234613212-05:00","close_reason":"Architectural pivot: will be rescoped for plugin architecture","dependencies":[{"issue_id":"claude-config-adp.4","depends_on_id":"claude-config-adp","type":"parent-child","created_at":"2026-02-06T23:36:14.594821379-05:00","created_by":"jsamuelsen"},{"issue_id":"claude-config-adp.4","depends_on_id":"claude-config-adp.3","type":"blocks","created_at":"2026-02-06T23:36:18.620277687-05:00","created_by":"jsamuelsen"}]}
{"id":"claude-config-du6","title":"Epic 2: Configuration Layers \u0026 MCP Manifest","description":"## Produces\n- layers/00-base/settings.json (universal defaults extracted from current config)\n- layers/00-base/CLAUDE.md (global rules from Insights Report friction analysis)\n- layers/10-plugins/core.json, workflow.json, lsp-all.json (plugin enablement)\n- layers/30-hooks/base-hooks.json (beads SessionStart/PreCompact)\n- overlays/ profiles: minimal, full-stack, python, go, typescript, java, ci\n- layers/40-machine/ templates and README\n- MCP server manifest: versioned registry of all MCP servers with status (active/candidate/deferred), compatibility requirements, and failure modes\n\n## Defers\n- Agent curation, skills, lifecycle scripts\n\n## Dependencies\n- Epic 1 (Foundation)","status":"closed","priority":1,"issue_type":"feature","owner":"jsamuelsen11@gmail.com","created_at":"2026-02-06T22:07:22.814031938-05:00","created_by":"jsamuelsen","updated_at":"2026-02-07T14:43:52.220546715-05:00","closed_at":"2026-02-07T14:43:52.220546715-05:00","close_reason":"Architectural pivot: all epics replaced by plugin-based architecture","dependencies":[{"issue_id":"claude-config-du6","depends_on_id":"claude-config-9re","type":"blocks","created_at":"2026-02-06T22:17:57.486519584-05:00","created_by":"jsamuelsen"}]}
{"id":"claude-config-du6.1","title":"2.1: Base settings layer (layers/00-base/settings.json)","description":"## What to build\nExtract universal settings into layers/00-base/settings.json.\n\n## Content\nStart from current ~/.claude/settings.json. Extract ONLY universal keys:\n- alwaysThinkingEnabled: true\n- feedbackSurveyState: (preserve current value)\n- $schema reference\n\nDO NOT include enabledPlugins or hooks — those come from layers 10-plugins and 30-hooks.\n\n## Planning required\nDiscuss with user: are there other universal settings beyond the above two? Check the Claude Code settings.json schema for available keys.\n\n## Acceptance\n- Valid JSON with $schema reference\n- Contains only universal keys (no plugins, no hooks)\n- Passes JSON schema validation\n\n## Defers\nPlugin layers, hook layers, overlays","status":"closed","priority":1,"issue_type":"task","owner":"jsamuelsen11@gmail.com","created_at":"2026-02-06T23:20:29.502265272-05:00","created_by":"jsamuelsen","updated_at":"2026-02-07T14:37:28.771120335-05:00","closed_at":"2026-02-07T14:37:28.771120335-05:00","close_reason":"Architectural pivot: layer composition replaced by native plugin system","dependencies":[{"issue_id":"claude-config-du6.1","depends_on_id":"claude-config-du6","type":"parent-child","created_at":"2026-02-06T23:20:29.503650458-05:00","created_by":"jsamuelsen"}]}
{"id":"claude-config-du6.2","title":"2.2: Global CLAUDE.md (layers/00-base/CLAUDE.md)","description":"## What to build\nThe global CLAUDE.md baseline. This is the highest-impact file in the entire project — it shapes every Claude session.\n\n## PLANNING CONVERSATION REQUIRED\nBefore writing, discuss with user to:\n1. Validate each proposed rule against current workflow\n2. Identify missing rules from recent experience\n3. Prioritize: which rules prevent the most friction?\n4. Remove any rules that are redundant with Claude Code defaults\n\n## Starting point (from Insights Report friction analysis)\nThese rules address documented friction patterns:\n\n### Code Quality (addresses 34 buggy-code + 27 rejected-action instances)\n- Always run pre-commit/lefthook checks before considering any task complete\n- Never propose nolint/noqa/lint-rule-exclusions — fix the root cause\n- Validate markdown with markdownlint before committing (MD013, MD040)\n- Never use magic numbers — define constants\n- Always handle errors explicitly (no _ = err in Go, no bare except in Python)\n\n### Git Workflow (addresses branch management friction)\n- Never push to main directly. Always create a feature branch + PR\n- Ask which branch to target if unclear\n- One task = one commit. Do not batch unrelated changes\n- Commit before closing/completing any task\n\n### Task Management / Beads (addresses CLI flag errors)\n- Use --parent (not --epic) for sub-tasks\n- Add tasks as children, not blockers, unless explicitly asked\n- Always commit before closing/completing a task\n- Work one task at a time unless explicitly told to parallelize\n- Complete each task fully (implement → test → lint → commit) before the next\n\n### Workflow Discipline (addresses excessive exploration)\n- When planning, be concise. Present what you have within 5 minutes\n- Do not modify code when asked to update docs only, and vice versa\n- If scope is unclear, ask before expanding\n\n### Python Projects (addresses uv/ruff friction)\n- Use uv for all Python operations. Never bare python/pip/pytest\n- All test files must have proper pytestmark decorators\n- Use specific match parameters on pytest.raises calls\n\n### Go Projects (addresses golangci-lint friction)\n- Use task (Taskfile) for build/test/lint where available\n- Use gofumpt for formatting, golangci-lint for linting\n- Never ignore error returns\n\n## Acceptance\n- User has reviewed and approved every rule\n- No rule is redundant with Claude Code's built-in system prompt\n- Each rule traces to a documented friction pattern\n- Total length is concise (~30-40 lines, not a wall of text)\n\n## Defers\nProject-level CLAUDE.md (those go in project-templates/)","status":"closed","priority":1,"issue_type":"task","owner":"jsamuelsen11@gmail.com","created_at":"2026-02-06T23:20:29.549104554-05:00","created_by":"jsamuelsen","updated_at":"2026-02-07T14:37:28.78352282-05:00","closed_at":"2026-02-07T14:37:28.78352282-05:00","close_reason":"Architectural pivot: layer composition replaced by native plugin system","dependencies":[{"issue_id":"claude-config-du6.2","depends_on_id":"claude-config-du6","type":"parent-child","created_at":"2026-02-06T23:20:29.550122033-05:00","created_by":"jsamuelsen"},{"issue_id":"claude-config-du6.2","depends_on_id":"claude-config-du6.1","type":"blocks","created_at":"2026-02-06T23:25:53.322278916-05:00","created_by":"jsamuelsen"}]}
{"id":"claude-config-du6.3","title":"2.3: Plugin layer files (core, workflow, LSP)","description":"## What to build\nThree plugin enablement JSON files under layers/10-plugins/.\n\n## PLANNING CONVERSATION REQUIRED\nDiscuss with user: validate plugin selections, confirm nothing missing or unwanted.\n\n## Files\n\n### layers/10-plugins/core.json\nAlways-on plugins. Current proposed set:\n- beads@beads-marketplace: true (epic-driven task management)\n- context7@claude-plugins-official: true (documentation lookup)\n- serena@claude-plugins-official: true (semantic code analysis via LSP)\n- greptile@claude-plugins-official: true (AI-powered PR review)\n\n### layers/10-plugins/workflow.json\nWorkflow plugins. Current proposed set:\n- feature-dev@claude-plugins-official: true (guided feature development)\n- code-review@claude-plugins-official: true (code review skill)\n- commit-commands@claude-plugins-official: true (git commit workflow)\n\n### layers/10-plugins/lsp-all.json\nAll LSP plugins (machine overlays disable unavailable ones):\n- vtsls@claude-code-lsps: true (TypeScript)\n- gopls@claude-code-lsps: true (Go)\n- gopls-lsp@claude-plugins-official: true (Go - alternative)\n- pyright-lsp@claude-plugins-official: true (Python)\n- rust-analyzer@claude-code-lsps: true (Rust)\n- jdtls@claude-code-lsps: true (Java)\n- jdtls-lsp@claude-plugins-official: true (Java - alternative)\n- clangd@claude-code-lsps: true (C/C++)\n- omnisharp@claude-code-lsps: true (C#)\n- kotlin-language-server@claude-code-lsps: true (Kotlin)\n- intelephense@claude-code-lsps: true (PHP)\n- solargraph@claude-code-lsps: true (Ruby)\n- vscode-html-css@claude-code-lsps: true (HTML/CSS)\n\n## Format\nEach file is a JSON fragment with only an enabledPlugins key:\n{\"enabledPlugins\": {\"plugin@marketplace\": true, ...}}\n\n## Acceptance\n- All three files are valid JSON\n- Plugin names match exact format from ~/.claude/settings.json\n- compose.py merges them correctly (test with task 2.8)\n\n## Defers\nMachine-specific plugin disablement (handled by machine overlays)","status":"closed","priority":1,"issue_type":"task","owner":"jsamuelsen11@gmail.com","created_at":"2026-02-06T23:23:17.915659813-05:00","created_by":"jsamuelsen","updated_at":"2026-02-07T14:37:28.799463176-05:00","closed_at":"2026-02-07T14:37:28.799463176-05:00","close_reason":"Architectural pivot: layer composition replaced by native plugin system","dependencies":[{"issue_id":"claude-config-du6.3","depends_on_id":"claude-config-du6","type":"parent-child","created_at":"2026-02-06T23:23:17.917621578-05:00","created_by":"jsamuelsen"},{"issue_id":"claude-config-du6.3","depends_on_id":"claude-config-du6.2","type":"blocks","created_at":"2026-02-06T23:25:53.359599956-05:00","created_by":"jsamuelsen"}]}
{"id":"claude-config-du6.4","title":"2.4: Hook layer (layers/30-hooks/base-hooks.json)","description":"## What to build\nUniversal hook definitions in layers/30-hooks/base-hooks.json.\n\n## PLANNING CONVERSATION REQUIRED\nDiscuss with user:\n1. Current hooks: SessionStart=[bd prime], PreCompact=[bd prime]. Keep these?\n2. Should we add PostToolUse hooks for auto-linting after Edit/Write?\n3. Any other hook events to configure? (PreToolUse, PostToolUse, etc.)\n\n## Current hooks (from ~/.claude/settings.json)\n{\n  \"hooks\": {\n    \"PreCompact\": [{\"hooks\": [{\"command\": \"bd prime\", \"type\": \"command\"}], \"matcher\": \"\"}],\n    \"SessionStart\": [{\"hooks\": [{\"command\": \"bd prime\", \"type\": \"command\"}], \"matcher\": \"\"}]\n  }\n}\n\n## Potential additions (from Insights Report recommendations)\nPostToolUse hook for auto-linting after Edit/Write:\n- Matcher: \"Edit|Write\"\n- Command: detect project type, run appropriate linter on changed file\n- This would address the #1 friction source (buggy code that fails pre-commit)\n\n## Acceptance\n- Valid JSON matching Claude Code hooks schema\n- Hooks are additive (compose.py concatenates with other layers)\n- User has approved all hook definitions\n\n## Defers\nCustom project-specific hooks (those go in project .claude/ dirs)","status":"closed","priority":1,"issue_type":"task","owner":"jsamuelsen11@gmail.com","created_at":"2026-02-06T23:23:17.954761508-05:00","created_by":"jsamuelsen","updated_at":"2026-02-07T14:37:28.812192107-05:00","closed_at":"2026-02-07T14:37:28.812192107-05:00","close_reason":"Architectural pivot: layer composition replaced by native plugin system","dependencies":[{"issue_id":"claude-config-du6.4","depends_on_id":"claude-config-du6","type":"parent-child","created_at":"2026-02-06T23:23:17.955793494-05:00","created_by":"jsamuelsen"},{"issue_id":"claude-config-du6.4","depends_on_id":"claude-config-du6.3","type":"blocks","created_at":"2026-02-06T23:25:53.394341701-05:00","created_by":"jsamuelsen"}]}
{"id":"claude-config-du6.5","title":"2.5: Machine overlay templates","description":"## What to build\nTemplates and documentation for machine-specific overlays.\n\n## Files\n\n### layers/40-machine/_template.json\nAnnotated template showing all overridable fields:\n- enabledPlugins overrides (set to false to disable LSPs for missing runtimes)\n- Any machine-specific scalar overrides\n- _machine, _generated, _runtimes metadata fields\n\n### layers/40-machine/_template.claude.md\nTemplate for machine-specific CLAUDE.md fragment:\n- Machine name and purpose\n- Available runtimes and their paths\n- Machine-specific conventions (e.g., \"Docker not available on this machine\")\n\n### layers/40-machine/README.md\nInstructions for creating a machine overlay:\n- Run ccfg init-machine (auto-detects runtimes)\n- Or manually copy template and edit\n- Which fields to override and why\n- Reminder: these files are gitignored\n\n## Design references\n- D7: Machine overlays gitignored, identified by hostname\n- CCFG_MACHINE env var override for shared hostnames\n\n## Acceptance\n- _template.json is valid JSON with annotations as comments (or separate doc)\n- README clearly explains the workflow\n- Both templates are tracked in git (not gitignored)\n\n## Defers\nActual machine overlays (generated at install time, gitignored)","status":"closed","priority":2,"issue_type":"task","owner":"jsamuelsen11@gmail.com","created_at":"2026-02-06T23:25:45.657294161-05:00","created_by":"jsamuelsen","updated_at":"2026-02-07T14:37:28.820551747-05:00","closed_at":"2026-02-07T14:37:28.820551747-05:00","close_reason":"Architectural pivot: layer composition replaced by native plugin system","dependencies":[{"issue_id":"claude-config-du6.5","depends_on_id":"claude-config-du6","type":"parent-child","created_at":"2026-02-06T23:25:45.659734728-05:00","created_by":"jsamuelsen"},{"issue_id":"claude-config-du6.5","depends_on_id":"claude-config-du6.3","type":"blocks","created_at":"2026-02-06T23:25:53.434297835-05:00","created_by":"jsamuelsen"}]}
{"id":"claude-config-du6.6","title":"2.6: Overlay profiles (minimal, full-stack, python, go, ts, java, ci)","description":"## What to build\nSeven composable overlay profiles in overlays/.\n\n## PLANNING CONVERSATION REQUIRED\nDiscuss with user: validate overlay boundaries, confirm which overlays are needed.\n\n## Overlay definitions\n\n### overlays/minimal.json\n- enabledPlugins: only core.json plugins (beads, context7, serena, greptile)\n- No LSPs, no workflow plugins\n- agents: [\"core\"] only\n- Use case: quick sessions, unfamiliar repos\n\n### overlays/full-stack.json\n- enabledPlugins: all plugins from core + workflow + lsp-all\n- agents: [\"core\", \"python\", \"go\", \"typescript\", \"java\", \"infra\"]\n- Use case: polyglot development, everything available\n\n### overlays/python.json\n- enabledPlugins: pyright-lsp only (added to whatever base provides)\n- agents: [\"core\", \"python\"]\n- Use case: Python-focused work\n\n### overlays/go.json\n- enabledPlugins: gopls, gopls-lsp\n- agents: [\"core\", \"go\"]\n\n### overlays/typescript.json\n- enabledPlugins: vtsls\n- agents: [\"core\", \"typescript\"]\n\n### overlays/java.json\n- enabledPlugins: jdtls, jdtls-lsp, kotlin-language-server\n- agents: [\"core\", \"java\"]\n\n### overlays/ci.json\n- enabledPlugins: core only, all LSPs false, frontend-design false\n- agents: [\"core\"]\n- Use case: headless CI/CD environments\n\n## Format\nEach overlay is a JSON fragment:\n{\n  \"enabledPlugins\": {...},\n  \"agents\": [\"core\", \"python\"]\n}\n\n## Acceptance\n- All seven files are valid JSON\n- compose.py correctly merges overlays with base + plugins\n- Stacking works: python + full-stack gives union of both\n- ci overlay correctly disables interactive plugins\n\n## Defers\nOverlay-specific CLAUDE.md fragments (future enhancement)","status":"closed","priority":2,"issue_type":"task","owner":"jsamuelsen11@gmail.com","created_at":"2026-02-06T23:25:45.700163093-05:00","created_by":"jsamuelsen","updated_at":"2026-02-07T14:37:28.832449959-05:00","closed_at":"2026-02-07T14:37:28.832449959-05:00","close_reason":"Architectural pivot: layer composition replaced by native plugin system","dependencies":[{"issue_id":"claude-config-du6.6","depends_on_id":"claude-config-du6","type":"parent-child","created_at":"2026-02-06T23:25:45.701057772-05:00","created_by":"jsamuelsen"},{"issue_id":"claude-config-du6.6","depends_on_id":"claude-config-du6.3","type":"blocks","created_at":"2026-02-06T23:25:53.470794543-05:00","created_by":"jsamuelsen"}]}
{"id":"claude-config-du6.7","title":"2.7: MCP server manifest","description":"## What to build\nA versioned registry of all MCP servers at layers/10-plugins/mcp-manifest.json.\n\nThis is a DOCUMENTATION artifact, not consumed by compose.py. It tracks the MCP landscape for decision-making.\n\n## Schema per entry\n{\n  \"name\": \"context7\",\n  \"plugin_id\": \"context7@claude-plugins-official\",\n  \"status\": \"active|candidate|deferred\",\n  \"version\": \"current\",\n  \"role\": \"Documentation lookup with version-specific content\",\n  \"requirements\": [\"npm (for server runtime)\"],\n  \"failure_modes\": [\"API rate limiting\", \"library not in index\"],\n  \"justification\": \"Essential for multi-language documentation lookup\",\n  \"added\": \"2026-02-06\"\n}\n\n## Entries to include\n\n### Active (status: active)\n- context7: Documentation lookup\n- serena: Semantic code analysis via LSP\n- greptile: AI-powered code review for PRs (NOTE: requires API key — optional/paid)\n\n### Candidate (status: candidate)\n- docker-mcp: Container management\n- mcp-sqlite / DBHub: Database access\n- playwright-mcp: Browser testing\n- pytest-mcp-server: Test feedback loop\n\n### Deferred (status: deferred)\n- Any servers evaluated and rejected, with reason\n\n## Acceptance\n- Valid JSON array of server entries\n- All active servers have complete fields\n- Candidates have at least name, status, role, requirements\n- Document notes that Greptile requires API key (not free)\n\n## Defers\nFull MCP curation and evaluation (future sessions)","status":"closed","priority":2,"issue_type":"task","owner":"jsamuelsen11@gmail.com","created_at":"2026-02-06T23:25:45.740394206-05:00","created_by":"jsamuelsen","updated_at":"2026-02-07T14:37:28.843376523-05:00","closed_at":"2026-02-07T14:37:28.843376523-05:00","close_reason":"Architectural pivot: layer composition replaced by native plugin system","dependencies":[{"issue_id":"claude-config-du6.7","depends_on_id":"claude-config-du6","type":"parent-child","created_at":"2026-02-06T23:25:45.752840671-05:00","created_by":"jsamuelsen"},{"issue_id":"claude-config-du6.7","depends_on_id":"claude-config-du6.3","type":"blocks","created_at":"2026-02-06T23:25:53.512654845-05:00","created_by":"jsamuelsen"}]}
{"id":"claude-config-du6.8","title":"2.8: Compose integration test with real layer files","description":"## What to build\nEnd-to-end pytest test that composes real layer files from tasks 2.1-2.6.\n\n## Test scenario\n1. Load layers/00-base/settings.json\n2. Load layers/10-plugins/core.json + workflow.json\n3. Load layers/30-hooks/base-hooks.json\n4. Load overlays/python.json\n5. Apply a mock machine overlay that disables jdtls\n6. Compose all layers using compose.py\n7. Assert the output matches expected structure:\n   - alwaysThinkingEnabled: true\n   - enabledPlugins contains beads, context7, serena, greptile, pyright-lsp\n   - enabledPlugins does NOT contain jdtls\n   - hooks contain SessionStart and PreCompact with bd prime\n   - feedbackSurveyState preserved from base\n\n## Acceptance\n- Test passes: uv run pytest tests/test_compose_integration.py -v\n- Test uses real files from layers/ and overlays/ directories\n- Test validates the full merge pipeline end-to-end\n\n## Dependencies\nRequires tasks 2.1-2.6 to be complete (real layer files must exist).\n\n## Defers\nFull verify suite (Epic 5)","status":"closed","priority":2,"issue_type":"task","owner":"jsamuelsen11@gmail.com","created_at":"2026-02-06T23:25:45.793705955-05:00","created_by":"jsamuelsen","updated_at":"2026-02-07T14:37:28.853940051-05:00","closed_at":"2026-02-07T14:37:28.853940051-05:00","close_reason":"Architectural pivot: layer composition replaced by native plugin system","dependencies":[{"issue_id":"claude-config-du6.8","depends_on_id":"claude-config-du6","type":"parent-child","created_at":"2026-02-06T23:25:45.795712551-05:00","created_by":"jsamuelsen"},{"issue_id":"claude-config-du6.8","depends_on_id":"claude-config-du6.4","type":"blocks","created_at":"2026-02-06T23:25:53.555638651-05:00","created_by":"jsamuelsen"},{"issue_id":"claude-config-du6.8","depends_on_id":"claude-config-du6.6","type":"blocks","created_at":"2026-02-06T23:25:53.599486867-05:00","created_by":"jsamuelsen"}]}
{"id":"claude-config-gex","title":"Epic 5: Lifecycle Scripts","description":"## Produces\n- bin/ccfg dispatcher + subcommands: install, uninstall, update, verify, compose, doctor, diff, init-machine\n- Idempotent install: backup → compose → copy settings.json → symlink CLAUDE.md + agents → verify\n- 10-point verify suite (repo integrity, composition, symlinks, secrets safety, plugin consistency)\n- Drift detection via hash tracking\n\n## Defers\n- Project templates (Epic 6), evaluation harness (Epic 7)\n\n## Dependencies\n- Epic 1 (Foundation), Epic 2 (Layers), Epic 3 (Agents)","status":"closed","priority":1,"issue_type":"feature","owner":"jsamuelsen11@gmail.com","created_at":"2026-02-06T22:14:11.692700053-05:00","created_by":"jsamuelsen","updated_at":"2026-02-07T14:43:52.24387637-05:00","closed_at":"2026-02-07T14:43:52.24387637-05:00","close_reason":"Architectural pivot: all epics replaced by plugin-based architecture","dependencies":[{"issue_id":"claude-config-gex","depends_on_id":"claude-config-9re","type":"blocks","created_at":"2026-02-06T22:17:57.589524044-05:00","created_by":"jsamuelsen"},{"issue_id":"claude-config-gex","depends_on_id":"claude-config-du6","type":"blocks","created_at":"2026-02-06T22:17:57.625462538-05:00","created_by":"jsamuelsen"},{"issue_id":"claude-config-gex","depends_on_id":"claude-config-2lz","type":"blocks","created_at":"2026-02-06T22:17:57.660629892-05:00","created_by":"jsamuelsen"}]}
{"id":"claude-config-gex.1","title":"5.1: ccfg compose command","description":"## What to build\nImplement the compose subcommand in src/ccfg/cli.py.\n\n## Behavior\nccfg compose [--overlays python,go] [--machine HOSTNAME] [--output FILE]\n\n1. Resolve repo root (find .git or pyproject.toml ancestor)\n2. Load layers/00-base/settings.json\n3. Load and merge all layers/10-plugins/*.json\n4. Load and merge layers/30-hooks/base-hooks.json\n5. For each --overlays value, load and merge overlays/\u003cname\u003e.json\n6. If --machine given, load layers/40-machine/\u003cmachine\u003e.json\n   Otherwise auto-detect from hostname\n7. Run compose_settings() from compose.py\n8. Output to --output file or stdout\n\n## Also composes CLAUDE.md\nConcatenate CLAUDE.md layers:\n- layers/00-base/CLAUDE.md\n- overlays/\u003cname\u003e.claude.md (if exists, for each overlay)\n- layers/40-machine/\u003chostname\u003e.claude.md (if exists)\nWrite to out/CLAUDE.md\n\n## Also resolves agent manifest\nFrom overlay \"agents\" arrays, resolve to list of .md file paths.\nWrite to out/agent-manifest.txt\n\n## Acceptance\n- ccfg compose outputs valid JSON to stdout\n- ccfg compose --output /tmp/test.json writes to file\n- ccfg compose --overlays python includes pyright-lsp\n- CLAUDE.md composition works with concatenation\n- Agent manifest lists correct files for selected overlays\n- Errors gracefully on missing overlays or layers\n\n## Design references\n- D4: settings.json is copied (this produces the content to copy)\n- D8: Overlays are composable fragments\n\n## Defers\ninstall/verify/other commands","status":"closed","priority":1,"issue_type":"task","owner":"jsamuelsen11@gmail.com","created_at":"2026-02-06T23:27:31.113781601-05:00","created_by":"jsamuelsen","updated_at":"2026-02-07T14:42:49.944830715-05:00","closed_at":"2026-02-07T14:42:49.944830715-05:00","close_reason":"Architectural pivot: ccfg CLI eliminated, using native plugin install","dependencies":[{"issue_id":"claude-config-gex.1","depends_on_id":"claude-config-gex","type":"parent-child","created_at":"2026-02-06T23:27:31.115443349-05:00","created_by":"jsamuelsen"}]}
{"id":"claude-config-gex.2","title":"5.2: ccfg init-machine command","description":"## What to build\nImplement init-machine subcommand.\n\n## Behavior\nccfg init-machine [--name HOSTNAME]\n\n1. Run detect.py to get platform info and available runtimes\n2. Load layers/40-machine/_template.json\n3. Generate machine overlay:\n   - Set _machine, _generated, _runtimes metadata\n   - For each LSP plugin in lsp-all.json, set false if corresponding runtime is missing:\n     - No java → jdtls: false, jdtls-lsp: false, kotlin-language-server: false\n     - No node → vtsls: false\n     - No python → pyright-lsp: false\n     - No rust → rust-analyzer: false\n     - No dotnet → omnisharp: false\n     - No ruby → solargraph: false\n     - No php → intelephense: false\n     - No go → gopls: false, gopls-lsp: false\n4. Write to layers/40-machine/\u003chostname\u003e.json\n5. If file already exists, prompt for overwrite confirmation\n6. Print summary of detected runtimes and disabled plugins\n\n## Acceptance\n- Generates correct machine overlay for current machine\n- Disables LSPs for missing runtimes\n- Refuses to overwrite without --force or confirmation\n- Respects CCFG_MACHINE env var and --name flag\n\n## Defers\nMachine CLAUDE.md fragment generation (manual for now)","status":"closed","priority":1,"issue_type":"task","owner":"jsamuelsen11@gmail.com","created_at":"2026-02-06T23:27:31.15512697-05:00","created_by":"jsamuelsen","updated_at":"2026-02-07T14:42:49.953998692-05:00","closed_at":"2026-02-07T14:42:49.953998692-05:00","close_reason":"Architectural pivot: ccfg CLI eliminated, using native plugin install","dependencies":[{"issue_id":"claude-config-gex.2","depends_on_id":"claude-config-gex","type":"parent-child","created_at":"2026-02-06T23:27:31.156855324-05:00","created_by":"jsamuelsen"},{"issue_id":"claude-config-gex.2","depends_on_id":"claude-config-gex.1","type":"blocks","created_at":"2026-02-06T23:30:42.716225595-05:00","created_by":"jsamuelsen"}]}
{"id":"claude-config-gex.3","title":"5.3: ccfg install command","description":"## What to build\nThe main install command. Orchestrates all other components.\n\n## Behavior\nccfg install [--overlays python,go] [--machine HOSTNAME]\n\n### Step 1: Pre-flight checks\n- Python \u003e= 3.11, git \u003e= 2.30, claude CLI available\n- Repo root contains expected directories (layers/, overlays/, src/)\n- ~/.claude/ directory exists\n\n### Step 2: Backup existing config\n- Call backup.create_backup(~/.claude/)\n- Backs up: settings.json, CLAUDE.md, agents/\n- Skip if no existing files\n\n### Step 3: Init machine overlay (if needed)\n- If layers/40-machine/\u003chostname\u003e.json doesn't exist, run init-machine flow\n- Interactive: asks user to confirm or edit\n\n### Step 4: Compose settings\n- Run compose pipeline (same as ccfg compose)\n- Output settings.json to staging\n\n### Step 5: Install settings.json (COPY, not symlink — D4)\n- Copy composed settings.json to ~/.claude/settings.json\n- Store SHA256 hash in ~/.claude/.ccfg-settings-hash\n- If existing settings.json differs from last known hash, warn about drift\n\n### Step 6: Install CLAUDE.md (SYMLINK — D5 equivalent for CLAUDE.md)\n- Write composed CLAUDE.md to \u003crepo\u003e/out/CLAUDE.md\n- Symlink ~/.claude/CLAUDE.md → \u003crepo\u003e/out/CLAUDE.md\n\n### Step 7: Install agents (SYMLINK — D5)\n- Read agent manifest from compose output\n- For each agent .md file in manifest:\n  - Create symlink ~/.claude/agents/\u003cname\u003e.md → \u003crepo\u003e/layers/20-agents/\u003ccategory\u003e/\u003cname\u003e.md\n- Track installed symlinks in ~/.claude/.ccfg-agent-manifest\n\n### Step 8: Verify\n- Run ccfg verify internally\n- Report results\n\n## Acceptance\n- Full install succeeds on clean ~/.claude/\n- Re-running install is idempotent (same result)\n- Backup created before any changes\n- settings.json is a copy with hash tracking\n- CLAUDE.md is a symlink\n- Agent .md files are symlinks\n- Verify passes after install\n\n## Design references\n- D4: settings.json copied\n- D5: agents symlinked\n- D6: plugins/ untouched\n\n## Defers\nUninstall, update","status":"closed","priority":1,"issue_type":"task","owner":"jsamuelsen11@gmail.com","created_at":"2026-02-06T23:28:08.779797318-05:00","created_by":"jsamuelsen","updated_at":"2026-02-07T14:42:49.960359366-05:00","closed_at":"2026-02-07T14:42:49.960359366-05:00","close_reason":"Architectural pivot: ccfg CLI eliminated, using native plugin install","dependencies":[{"issue_id":"claude-config-gex.3","depends_on_id":"claude-config-gex","type":"parent-child","created_at":"2026-02-06T23:28:08.780897047-05:00","created_by":"jsamuelsen"},{"issue_id":"claude-config-gex.3","depends_on_id":"claude-config-gex.2","type":"blocks","created_at":"2026-02-06T23:30:43.230155637-05:00","created_by":"jsamuelsen"}]}
{"id":"claude-config-gex.4","title":"5.4: ccfg verify command (10-point health check)","description":"## What to build\n10-point verification suite.\n\n## Checks\n1. **Repo integrity**: git repo at expected path, required dirs exist\n2. **Machine overlay exists**: layers/40-machine/\u003chostname\u003e.json present\n3. **Composition valid**: run compose, output is valid JSON with required keys\n4. **settings.json installed**: ~/.claude/settings.json exists, hash matches .ccfg-settings-hash (warn on drift)\n5. **CLAUDE.md installed**: ~/.claude/CLAUDE.md is symlink to \u003crepo\u003e/out/CLAUDE.md\n6. **Agent symlinks valid**: all manifested agents have valid symlinks, no dangling\n7. **Credentials present**: ~/.claude/.credentials.json exists (warn-only, never fail)\n8. **Plugin consistency**: each enabledPlugins=true entry exists in ~/.claude/plugins/installed_plugins.json (warn if missing)\n9. **Runtime availability**: for each enabled LSP, check binary exists (vtsls, gopls, pyright, etc.)\n10. **Secrets safety**: secrets/ is gitignored, .credentials.json NOT tracked in git\n\n## Output format\n[PASS] Check description\n[WARN] Check description — details\n[FAIL] Check description — details\n\nSummary: X passed, Y warnings, Z failures\n\n## Acceptance\n- All 10 checks implemented\n- Exit code 0 if no failures (warnings OK)\n- Exit code 1 if any failures\n- --verbose flag shows additional details\n- Handles missing files gracefully (reports, doesn't crash)\n\n## Defers\nDoctor, diff commands","status":"closed","priority":1,"issue_type":"task","owner":"jsamuelsen11@gmail.com","created_at":"2026-02-06T23:28:08.819706891-05:00","created_by":"jsamuelsen","updated_at":"2026-02-07T14:42:49.9676713-05:00","closed_at":"2026-02-07T14:42:49.9676713-05:00","close_reason":"Architectural pivot: ccfg CLI eliminated, using native plugin install","dependencies":[{"issue_id":"claude-config-gex.4","depends_on_id":"claude-config-gex","type":"parent-child","created_at":"2026-02-06T23:28:08.820710384-05:00","created_by":"jsamuelsen"},{"issue_id":"claude-config-gex.4","depends_on_id":"claude-config-gex.3","type":"blocks","created_at":"2026-02-06T23:30:43.831509474-05:00","created_by":"jsamuelsen"}]}
{"id":"claude-config-gex.5","title":"5.5: ccfg uninstall + ccfg update commands","description":"## What to build\nTwo commands: uninstall (remove config) and update (refresh without full backup).\n\n## ccfg uninstall [--restore-backup]\n1. Remove ccfg-managed symlinks from ~/.claude/agents/ (identified by target pointing into repo)\n2. Remove CLAUDE.md symlink if it points into repo\n3. Optionally restore from backup (if --restore-backup and backup exists):\n   - Restore settings.json from backup\n   - Restore agents/ from backup\n   - Restore CLAUDE.md from backup\n4. Remove tracking files: .ccfg-settings-hash, .ccfg-agent-manifest\n5. Leave plugins/ completely untouched\n\n## ccfg update [--overlays LIST]\n1. Re-run compose with current or new overlay selection\n2. Copy new settings.json (update hash)\n3. Re-symlink CLAUDE.md\n4. Update agent symlinks (add new, remove stale)\n5. Run verify\n6. No backup step (update is lightweight)\n\n## Acceptance\n- uninstall removes all ccfg-managed artifacts\n- uninstall --restore-backup restores from latest backup\n- uninstall is idempotent\n- update refreshes config without backup\n- update with --overlays changes overlay selection\n- Both commands handle \"nothing to do\" gracefully\n\n## Defers\nDoctor, diff","status":"closed","priority":2,"issue_type":"task","owner":"jsamuelsen11@gmail.com","created_at":"2026-02-06T23:28:08.860902502-05:00","created_by":"jsamuelsen","updated_at":"2026-02-07T14:42:49.975777755-05:00","closed_at":"2026-02-07T14:42:49.975777755-05:00","close_reason":"Architectural pivot: ccfg CLI eliminated, using native plugin install","dependencies":[{"issue_id":"claude-config-gex.5","depends_on_id":"claude-config-gex","type":"parent-child","created_at":"2026-02-06T23:28:08.862047041-05:00","created_by":"jsamuelsen"},{"issue_id":"claude-config-gex.5","depends_on_id":"claude-config-gex.4","type":"blocks","created_at":"2026-02-06T23:30:44.444914814-05:00","created_by":"jsamuelsen"}]}
{"id":"claude-config-gex.6","title":"5.6: ccfg doctor + ccfg diff commands","description":"## What to build\nTwo diagnostic commands.\n\n## ccfg doctor\nDeep environment diagnostics:\n- Python version and path\n- uv version\n- git version\n- Claude Code version (claude --version)\n- OS and architecture\n- Available language runtimes (all 8 from detect.py) with version numbers\n- Enabled LSPs vs available runtimes (highlight mismatches)\n- Plugin installation status (installed_plugins.json)\n- Disk usage of ~/.claude/ subdirectories\n- Network connectivity for MCP servers (optional, skip if slow)\n\nOutput: formatted table with status indicators.\n\n## ccfg diff\nShow delta between composed and installed settings.json:\n- Run compose to get expected output\n- Read current ~/.claude/settings.json\n- Show unified diff (or structured diff highlighting key differences)\n- Highlight: added plugins, removed plugins, changed settings, drift from compose\n\n## Acceptance\n- doctor reports all environment details\n- doctor exit code 0 if healthy, 1 if critical issues\n- diff shows meaningful deltas (not just raw JSON diff)\n- diff exit code 0 if no differences, 1 if differences exist\n\n## Defers\nNothing — final Epic 5 task","status":"closed","priority":3,"issue_type":"task","owner":"jsamuelsen11@gmail.com","created_at":"2026-02-06T23:28:08.900798298-05:00","created_by":"jsamuelsen","updated_at":"2026-02-07T14:42:49.981976772-05:00","closed_at":"2026-02-07T14:42:49.981976772-05:00","close_reason":"Architectural pivot: ccfg CLI eliminated, using native plugin install","dependencies":[{"issue_id":"claude-config-gex.6","depends_on_id":"claude-config-gex","type":"parent-child","created_at":"2026-02-06T23:28:08.901764175-05:00","created_by":"jsamuelsen"},{"issue_id":"claude-config-gex.6","depends_on_id":"claude-config-gex.5","type":"blocks","created_at":"2026-02-06T23:30:45.030055509-05:00","created_by":"jsamuelsen"}]}
{"id":"claude-config-kph","title":"Epic 4: Skills Library","description":"## Produces\n- skills/global/: epic-execute, epic-plan, pr-create, coverage-push\n- skills/python/: test-coverage (uv/ruff/pytest specific)\n- skills/go/: test-coverage (task/golangci-lint specific)\n- Skill authoring guide (format, frontmatter, allowed-tools patterns)\n\n## Defers\n- Lifecycle scripts, project templates\n\n## Dependencies\n- Epic 1 (Foundation)","status":"closed","priority":2,"issue_type":"feature","owner":"jsamuelsen11@gmail.com","created_at":"2026-02-06T22:12:35.27790533-05:00","created_by":"jsamuelsen","updated_at":"2026-02-07T14:43:52.235361561-05:00","closed_at":"2026-02-07T14:43:52.235361561-05:00","close_reason":"Architectural pivot: all epics replaced by plugin-based architecture","dependencies":[{"issue_id":"claude-config-kph","depends_on_id":"claude-config-9re","type":"blocks","created_at":"2026-02-06T22:17:57.554831523-05:00","created_by":"jsamuelsen"}]}
{"id":"claude-config-kph.1","title":"4.1: /epic-execute skill","description":"## What to build\nskills/global/epic-execute/SKILL.md — Execute next beads task with full quality gates.\n\n## Skill behavior\n1. Run bd ready to find the next unstarted task\n2. Read the task description fully before starting\n3. Implement the changes required\n4. Run ALL linters (lefthook run pre-commit OR uv run ruff check)\n5. Run tests and confirm passing\n6. Fix any failures (never add nolint/noqa directives)\n7. Create a focused commit with task reference\n8. ONLY THEN mark the task complete with bd close \u003cid\u003e\n9. Never work on multiple tasks simultaneously\n10. Use --parent (not --epic) for sub-task creation\n\n## Format\nStandard Claude Code skill format:\n---\nallowed-tools: Bash(bd:*), Bash(git:*), Bash(uv run:*), Bash(make:*), Bash(lefthook:*), Read, Write, Edit, Grep, Glob\ndescription: Execute next beads task with full quality gates\n---\n\n## Acceptance\n- Valid YAML frontmatter with allowed-tools\n- Encodes the one-task-at-a-time workflow\n- References correct beads CLI commands\n- Includes lint-before-commit requirement\n\n## Defers\nSkill testing (manual validation)","status":"closed","priority":2,"issue_type":"task","owner":"jsamuelsen11@gmail.com","created_at":"2026-02-06T23:27:04.961230913-05:00","created_by":"jsamuelsen","updated_at":"2026-02-07T14:38:43.613891372-05:00","closed_at":"2026-02-07T14:38:43.613891372-05:00","close_reason":"Architectural pivot: skills will live inside plugin directories","dependencies":[{"issue_id":"claude-config-kph.1","depends_on_id":"claude-config-kph","type":"parent-child","created_at":"2026-02-06T23:27:04.962804001-05:00","created_by":"jsamuelsen"}]}
{"id":"claude-config-kph.2","title":"4.2: /epic-plan skill","description":"## What to build\nskills/global/epic-plan/SKILL.md — Plan a beads epic from requirements.\n\n## Skill behavior\n1. Accept feature/requirement description as argument\n2. Spawn explore agents for codebase understanding (time-boxed to 5 minutes)\n3. Produce structured beads epic with:\n   - Epic title and description\n   - Ordered child tasks with dependency chains\n   - Per-task acceptance criteria\n   - Explicit scope boundaries (what is deferred)\n4. Create the epic and tasks using bd create + bd dep add\n5. Present summary for user approval before creating\n\n## Format\n---\nallowed-tools: Bash(bd:*), Read, Grep, Glob, Task\ndescription: Plan a beads epic from requirements\nargument-hint: Feature or requirement description\n---\n\n## Acceptance\n- Valid YAML frontmatter\n- Time-boxes exploration (explicit 5-minute instruction)\n- Creates structured epic with dependencies\n- Includes user approval gate before committing plan\n\n## Defers\nSkill testing","status":"closed","priority":2,"issue_type":"task","owner":"jsamuelsen11@gmail.com","created_at":"2026-02-06T23:27:05.001427877-05:00","created_by":"jsamuelsen","updated_at":"2026-02-07T14:38:43.622178021-05:00","closed_at":"2026-02-07T14:38:43.622178021-05:00","close_reason":"Architectural pivot: skills will live inside plugin directories","dependencies":[{"issue_id":"claude-config-kph.2","depends_on_id":"claude-config-kph","type":"parent-child","created_at":"2026-02-06T23:27:05.003234573-05:00","created_by":"jsamuelsen"},{"issue_id":"claude-config-kph.2","depends_on_id":"claude-config-kph.1","type":"blocks","created_at":"2026-02-06T23:27:08.875691111-05:00","created_by":"jsamuelsen"}]}
{"id":"claude-config-kph.3","title":"4.3: /pr-create skill","description":"## What to build\nskills/global/pr-create/SKILL.md — Create PR with verification.\n\n## Skill behavior\n1. Confirm current branch is NOT main (error and stop if so)\n2. Run full lint suite (lefthook run pre-commit)\n3. Run full test suite\n4. If any failures, fix them before proceeding\n5. Ask user which branch to target if not obvious\n6. Create PR with gh pr create:\n   - Title from branch name or commit summary\n   - Body summarizing all commits on the branch\n   - Include test coverage numbers if available\n7. Report PR URL\n\n## Format\n---\nallowed-tools: Bash(git:*), Bash(gh:*), Bash(lefthook:*), Bash(uv run:*), Bash(make:*)\ndescription: Create a pull request with lint/test verification\n---\n\n## Acceptance\n- Valid YAML frontmatter\n- Blocks on main branch\n- Runs quality gates before PR creation\n- Asks for target branch\n\n## Defers\nSkill testing","status":"closed","priority":2,"issue_type":"task","owner":"jsamuelsen11@gmail.com","created_at":"2026-02-06T23:27:05.044973406-05:00","created_by":"jsamuelsen","updated_at":"2026-02-07T14:38:43.632233331-05:00","closed_at":"2026-02-07T14:38:43.632233331-05:00","close_reason":"Architectural pivot: skills will live inside plugin directories","dependencies":[{"issue_id":"claude-config-kph.3","depends_on_id":"claude-config-kph","type":"parent-child","created_at":"2026-02-06T23:27:05.046640037-05:00","created_by":"jsamuelsen"},{"issue_id":"claude-config-kph.3","depends_on_id":"claude-config-kph.2","type":"blocks","created_at":"2026-02-06T23:27:08.924086-05:00","created_by":"jsamuelsen"}]}
{"id":"claude-config-kph.4","title":"4.4: /coverage-push skill","description":"## What to build\nskills/global/coverage-push/SKILL.md — Autonomous per-file coverage improvement loop.\n\n## Skill behavior\n1. Generate per-file coverage report (detect Python vs Go automatically)\n   - Python: uv run pytest --cov=src --cov-report=json\n   - Go: go test -coverprofile=coverage.out ./...\n2. Parse report, identify every file below 90% coverage\n3. Sort by coverage gap (lowest first)\n4. For each under-covered file:\n   a. Read source file and existing tests\n   b. Identify untested branches, error paths, edge cases\n   c. Write targeted tests following existing patterns\n   d. Run tests for just that file, fix failures\n   e. Run full suite for regression check\n   f. Run lefthook run pre-commit\n   g. Commit: test(\u003cmodule\u003e): increase coverage from X% to Y%\n5. After all files at 90%+, run final coverage report\n6. Create summary commit\n\n## Rules encoded\n- Use pytest fixtures from conftest.py (don't reinvent)\n- Add pytestmark = pytest.mark.unit to new Python test files\n- Use specific match on pytest.raises\n- Never use # pragma: no cover or //nolint to cheat\n- For Go: define constants for magic numbers\n\n## Format\n---\nallowed-tools: Bash(uv run:*), Bash(go:*), Bash(git:*), Bash(lefthook:*), Read, Write, Edit, Grep, Glob\ndescription: Autonomous per-file coverage improvement to 90%+\n---\n\n## Acceptance\n- Valid YAML frontmatter\n- Auto-detects Python vs Go\n- Iterates per-file, not aggregate\n- Commits per file, not batch\n- Encodes all quality rules from CLAUDE.md\n\n## Defers\nSkill testing","status":"closed","priority":2,"issue_type":"task","owner":"jsamuelsen11@gmail.com","created_at":"2026-02-06T23:27:05.089664144-05:00","created_by":"jsamuelsen","updated_at":"2026-02-07T14:38:43.64329777-05:00","closed_at":"2026-02-07T14:38:43.64329777-05:00","close_reason":"Architectural pivot: skills will live inside plugin directories","dependencies":[{"issue_id":"claude-config-kph.4","depends_on_id":"claude-config-kph","type":"parent-child","created_at":"2026-02-06T23:27:05.091358081-05:00","created_by":"jsamuelsen"},{"issue_id":"claude-config-kph.4","depends_on_id":"claude-config-kph.3","type":"blocks","created_at":"2026-02-06T23:27:08.965043271-05:00","created_by":"jsamuelsen"}]}
{"id":"claude-config-kph.5","title":"4.5: Language-specific skills (Python + Go test coverage)","description":"## What to build\nTwo language-specific coverage skills.\n\n### skills/python/test-coverage/SKILL.md\nPython-focused variant of coverage-push:\n- Uses uv run pytest --cov exclusively\n- Enforces pytestmark decorators\n- Enforces pytest.raises match parameters\n- Uses ruff for linting\n- References conftest.py fixtures\n\n### skills/go/test-coverage/SKILL.md\nGo-focused variant:\n- Uses task test:coverage or go test -coverprofile\n- Uses golangci-lint for linting\n- Uses gofumpt for formatting\n- Enforces error handling (no _ = err)\n- Enforces constant definitions (no magic numbers)\n\n## Format\nBoth use standard skill frontmatter with language-appropriate allowed-tools.\n\n## Acceptance\n- Both files have valid YAML frontmatter\n- Python skill references uv, ruff, pytest correctly\n- Go skill references task, golangci-lint, gofumpt correctly\n- Each is self-contained (not dependent on /coverage-push)\n\n## Defers\nAdditional language skills","status":"closed","priority":2,"issue_type":"task","owner":"jsamuelsen11@gmail.com","created_at":"2026-02-06T23:27:05.135623838-05:00","created_by":"jsamuelsen","updated_at":"2026-02-07T14:38:43.653228918-05:00","closed_at":"2026-02-07T14:38:43.653228918-05:00","close_reason":"Architectural pivot: skills will live inside plugin directories","dependencies":[{"issue_id":"claude-config-kph.5","depends_on_id":"claude-config-kph","type":"parent-child","created_at":"2026-02-06T23:27:05.13756436-05:00","created_by":"jsamuelsen"},{"issue_id":"claude-config-kph.5","depends_on_id":"claude-config-kph.4","type":"blocks","created_at":"2026-02-06T23:27:09.015819254-05:00","created_by":"jsamuelsen"}]}
